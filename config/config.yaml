model:
  name: "dinov2"  # Options: "dinov2", "vit", "resnet50"
  pretrained: true
  embedding_dim: 768  # For DINOv2/ViT
  image_size: 224

data:
  input_dir: "data/input"
  output_dir: "data/output"
  database_dir: "data/database"

indexing:
  index_file: "models/faiss_index.bin"
  metadata_file: "models/index_metadata.pkl"

text_search:
  default_threshold: 0.7  # Default similarity threshold for text search (0-1)
  normalize_names: true  # Whether to normalize part names before matching
  # Weights for different similarity metrics
  similarity_weights:
    jaccard: 0.4         # Weight for character-level Jaccard similarity
    length_ratio: 0.3    # Weight for length ratio similarity
    word_jaccard: 0.3    # Weight for word-level Jaccard similarity

training:
  batch_size: 32
  num_workers: 4

evaluation:
  top_k: [1, 5, 10, 20]

metadata:
  enabled: true  # Enabled metadata integration
  embedding_dim: 256
  fusion_method: "weighted"  # Options: "concat", "weighted"
  bom_dir: "data/output/bom"
  size_weight: 0.1  # Weight given to size similarity in reranking (0-1) - balanced for new algorithm

  # Autoencoder settings
  train_autoencoder: false  # Auto training on ingest disabled, use 'train-autoencoder' command instead
  hidden_dims: [512, 384]  # Hidden layer dimensions for encoder/decoder
  model_path: "models/metadata_autoencoder.pt"  # Path to save/load the trained model
  batch_size: 32  # Batch size for autoencoder training
  epochs: 50  # Number of training epochs
  learning_rate: 0.0001  # Learning rate for Adam optimizer

# New section for assembly-level search
assembly:
  enabled: false  # Disabled by default, enable with --use-assembly flag
  feature_dim: 512  # Input feature dimension for GNN
  hidden_dim: 256   # Hidden layer dimension for GNN
  embedding_dim: 768  # Output embedding dimension (matching visual embeddings)
  graph_dir: "data/output/hierarchical_graphs"  # Directory for hierarchical graph files
  index_file: "models/assembly_index.bin"  # Path to save/load assembly index
  metadata_file: "models/assembly_metadata.pkl"  # Path to save/load assembly metadata
  model_path: "models/assembly_gnn.pt"  # Path to save/load GNN model
  
  # GNN training settings
  batch_size: 8  # Smaller batch size due to graph complexity
  epochs: 5
  learning_rate: 0.0001